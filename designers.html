<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Designer Dashboard - Namma Fontsu</title>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Manrope:wght@200;400;500;600;700;800&family=Noto+Sans+Kannada:wght@400;700&family=Noto+Sans+Bengali:wght@400;700&family=Noto+Sans+Devanagari:wght@400;700&family=Permanent+Marker&display=swap" rel="stylesheet">
  
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/designers.css">
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            bg: '#F5F5F0',
            text: '#111111',
            card: '#E2E2DC',
            teal: '#007F8C',
            highlight: '#E6B325',
            dark: '#0C0C0C',
            white: '#ffffff',
          },
          fontFamily: {
            sans: ['Manrope', 'sans-serif'],
            display: ['Space Grotesk', 'sans-serif'],
            brush: ['"Permanent Marker"', 'cursive'], 
            kannada: ['"Noto Sans Kannada"', 'sans-serif'],
            hindi: ['"Noto Sans Devanagari"', 'sans-serif'],
            bengali: ['"Noto Sans Bengali"', 'sans-serif'],
          }
        }
      }
    }
  </script>
</head>
<body class="font-sans antialiased min-h-screen flex flex-col selection:bg-teal selection:text-white">

  <!-- Texture Overlay -->
  <div class="texture-overlay"></div>

  <!-- NAVIGATION -->
  <nav class="sticky top-0 z-50 bg-bg/95 backdrop-blur-md border-b-2 border-text">
    <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
      <!-- Logo -->
      <a href="index.html" class="flex flex-col items-start leading-none group">
        <div class="text-xl font-brush text-text tracking-wide scale-y-110">NAMMA</div>
        <div class="text-xl font-brush text-text tracking-wide relative scale-y-110">
          FONTSU
          <span class="absolute -bottom-1 left-0 w-full h-1 bg-teal rounded-full transform scale-x-100 origin-left group-hover:scale-x-110 transition-transform"></span>
        </div>
      </a>

      <!-- Desktop Menu -->
      <div class="hidden md:flex items-center gap-8 font-bold text-sm">
        <a href="fonts.html" class="hover:text-teal uppercase tracking-wider">All Fonts</a>
        <a href="designers.html" class="hover:text-teal uppercase tracking-wider text-teal">Designers</a>
        <a href="about.html" class="hover:text-teal uppercase tracking-wider">About</a>
      </div>

      <!-- Actions -->
      <div class="flex items-center gap-4">
        <button onclick="window.location.href='cart.html'" class="relative p-2 hover:text-teal transition-colors">
          <i class="fa-solid fa-shopping-bag text-xl"></i>
          <span id="cart-badge" class="absolute top-0 right-0 w-4 h-4 bg-teal text-white text-[10px] flex items-center justify-center rounded-full font-bold hidden">0</span>
        </button>
        <button onclick="window.location.href='auth.html'" class="hidden md:block btn-outline py-2 px-6 text-xs uppercase tracking-widest">
          Log In
        </button>
        <button class="md:hidden text-text text-xl"><i class="fa-solid fa-bars"></i></button>
      </div>
    </div>
  </nav>

  <!-- MAIN CONTENT -->
  <main class="flex-1 w-full max-w-7xl mx-auto p-6 md:p-12 relative z-10">
    
    <!-- Dashboard Header -->
    <div class="mb-8 flex justify-between items-end">
      <div>
        <h1 class="font-display text-4xl font-bold mb-1">Designer Dashboard</h1>
        <p class="text-text/60 font-bold">Welcome back, <span class="text-teal">Umesh</span></p>
      </div>
      <div class="text-right">
        <div class="text-xs font-bold uppercase tracking-widest text-text/40">Total Earnings</div>
        <div class="font-display text-3xl font-bold">₹12,540</div>
      </div>
    </div>

    <!-- Dashboard Grid -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-12">
      
      <!-- Upload Card -->
      <div class="lg:col-span-2 bg-white border-2 border-text shadow-raw p-8">
        <h3 class="font-bold uppercase tracking-widest mb-6 border-b-2 border-text pb-2">Upload New Font</h3>
        <form id="uploadForm" onsubmit="handleUpload(event)" class="space-y-4">
          <div class="grid grid-cols-2 gap-4">
            <input type="text" name="font_name" id="fontName" placeholder="Font Name" class="w-full bg-bg border-2 border-text p-3 font-bold focus:outline-none focus:border-teal" required>
            <select name="script" id="script" class="w-full bg-bg border-2 border-text p-3 font-bold focus:outline-none focus:border-teal">
              <option value="Kannada">Kannada</option>
              <option value="Devanagari">Devanagari</option>
              <option value="Bengali">Bengali</option>
              <option value="Tamil">Tamil</option>
            </select>
          </div>
          <div class="grid grid-cols-2 gap-4">
            <input type="text" name="designer_name" id="designerName" placeholder="Designer Name" class="w-full bg-bg border-2 border-text p-3 font-bold focus:outline-none focus:border-teal" required>
            <select name="category" id="category" class="w-full bg-bg border-2 border-text p-3 font-bold focus:outline-none focus:border-teal">
              <option value="Display">Display</option>
              <option value="Text">Text</option>
              <option value="Handwritten">Handwritten</option>
              <option value="Decorative">Decorative</option>
            </select>
          </div>
          <div class="grid grid-cols-2 gap-4">
            <input type="number" name="price_personal" id="pricePersonal" placeholder="Personal License Price (₹)" value="499" class="w-full bg-bg border-2 border-text p-3 font-bold focus:outline-none focus:border-teal" required>
            <input type="number" name="price_commercial" id="priceCommercial" placeholder="Commercial License Price (₹)" value="2499" class="w-full bg-bg border-2 border-text p-3 font-bold focus:outline-none focus:border-teal" required>
          </div>
          <textarea name="description" id="description" placeholder="Font Description (Optional)" rows="3" class="w-full bg-bg border-2 border-text p-3 font-bold focus:outline-none focus:border-teal resize-none"></textarea>
          <div id="dropZone" class="border-2 border-dashed border-text bg-bg p-8 text-center cursor-pointer hover:bg-white transition-colors">
            <i class="fa-solid fa-cloud-arrow-up text-2xl mb-2"></i>
            <p class="font-bold text-sm">Drag & drop .OTF / .TTF / .WOFF files</p>
            <p class="text-xs text-text/60 mt-1">or click to browse (max 10MB)</p>
            <input type="file" name="font_file" id="fontFile" accept=".ttf,.otf,.woff,.woff2" class="hidden" required>
            <p id="fileName" class="text-sm text-teal font-bold mt-2 hidden"></p>
          </div>
          <button type="submit" id="submitBtn" class="btn-primary w-full">Submit for Review</button>
          <div id="uploadStatus" class="hidden text-center font-bold"></div>
        </form>
      </div>

      <!-- Stats -->
      <div class="bg-dark text-white border-2 border-text shadow-raw p-8">
        <h3 class="font-bold uppercase tracking-widest mb-6 text-teal">Analytics</h3>
        <div class="chart-container">
          <canvas id="revenueChart"></canvas>
        </div>
        <div class="mt-4 text-center text-sm text-white/60">Last 30 Days Activity</div>
      </div>
    </div>

    <!-- My Fonts Section -->
    <div class="my-fonts-section">
      <div class="flex justify-between items-end mb-6 border-b-2 border-text pb-4">
        <h2 class="font-display text-3xl font-bold">My Fonts</h2>
        <span class="text-sm font-bold text-text/60">5 Total Fonts</span>
      </div>

      <div class="bg-white border-2 border-text shadow-raw overflow-hidden">
        <table class="w-full">
          <thead class="bg-text text-white">
            <tr>
              <th class="p-4 text-left text-xs font-bold uppercase tracking-wider">Font Name</th>
              <th class="p-4 text-left text-xs font-bold uppercase tracking-wider">Script</th>
              <th class="p-4 text-left text-xs font-bold uppercase tracking-wider">Status</th>
              <th class="p-4 text-left text-xs font-bold uppercase tracking-wider">Downloads</th>
              <th class="p-4 text-left text-xs font-bold uppercase tracking-wider">Revenue</th>
            </tr>
          </thead>
          <tbody>
            <tr class="hover:bg-bg transition-colors">
              <td class="p-4 font-bold">Hombe Display</td>
              <td class="p-4">Kannada</td>
              <td class="p-4">
                <span class="inline-block px-2 py-1 bg-teal text-white border border-teal text-xs font-bold uppercase">Live</span>
              </td>
              <td class="p-4">245</td>
              <td class="p-4 font-bold">₹4,250</td>
            </tr>
            <tr class="hover:bg-bg transition-colors">
              <td class="p-4 font-bold">Malgudi Serif</td>
              <td class="p-4">Devanagari</td>
              <td class="p-4">
                <span class="inline-block px-2 py-1 bg-teal text-white border border-teal text-xs font-bold uppercase">Live</span>
              </td>
              <td class="p-4">189</td>
              <td class="p-4 font-bold">₹3,890</td>
            </tr>
            <tr class="hover:bg-bg transition-colors">
              <td class="p-4 font-bold">Tech Bengaluru</td>
              <td class="p-4">Kannada</td>
              <td class="p-4">
                <span class="inline-block px-2 py-1 bg-highlight text-text border border-text text-xs font-bold uppercase">Pending</span>
              </td>
              <td class="p-4">-</td>
              <td class="p-4 font-bold">-</td>
            </tr>
            <tr class="hover:bg-bg transition-colors">
              <td class="p-4 font-bold">Chai Shop</td>
              <td class="p-4">Devanagari</td>
              <td class="p-4">
                <span class="inline-block px-2 py-1 bg-teal text-white border border-teal text-xs font-bold uppercase">Live</span>
              </td>
              <td class="p-4">356</td>
              <td class="p-4 font-bold">₹2,100</td>
            </tr>
            <tr class="hover:bg-bg transition-colors">
              <td class="p-4 font-bold">Bengal Tiger</td>
              <td class="p-4">Bengali</td>
              <td class="p-4">
                <span class="inline-block px-2 py-1 bg-teal text-white border border-teal text-xs font-bold uppercase">Live</span>
              </td>
              <td class="p-4">412</td>
              <td class="p-4 font-bold">₹2,300</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

  </main>

  <!-- FOOTER -->
  <footer class="bg-text text-white py-12 border-t-4 border-teal relative z-10 mt-12">
    <div class="max-w-7xl mx-auto px-6 grid grid-cols-1 md:grid-cols-4 gap-8">
      <div class="md:col-span-2">
        <h3 class="font-brush text-2xl mb-4">NAMMA FONTSU</h3>
        <p class="text-white/60 max-w-sm">A platform for designers to discover, preview, and license authentic Indian regional typefaces. Designed for culture.</p>
      </div>
      <div>
        <h4 class="font-bold uppercase tracking-widest text-teal mb-4 text-xs">Platform</h4>
        <ul class="space-y-2 text-sm text-white/80">
          <li><a href="fonts.html" class="hover:text-white">Browse Fonts</a></li>
          <li><a href="designers.html" class="hover:text-white">Sell Your Fonts</a></li>
          <li><a href="#" class="hover:text-white">Licensing Terms</a></li>
        </ul>
      </div>
      <div>
        <h4 class="font-bold uppercase tracking-widest text-teal mb-4 text-xs">Connect</h4>
        <ul class="space-y-2 text-sm text-white/80">
          <li><a href="#" class="hover:text-white">Instagram</a></li>
          <li><a href="#" class="hover:text-white">Twitter / X</a></li>
          <li><a href="#" class="hover:text-white">Support</a></li>
        </ul>
      </div>
    </div>
  </footer>

  <!-- JavaScript -->
  <script src="js/app.js"></script>
  <script src="js/cart.js"></script>
  <script>
    // File upload handling
    const dropZone = document.getElementById('dropZone');
    const fontFileInput = document.getElementById('fontFile');
    const fileNameDisplay = document.getElementById('fileName');
    const uploadForm = document.getElementById('uploadForm');
    const submitBtn = document.getElementById('submitBtn');
    const uploadStatus = document.getElementById('uploadStatus');

    // Click to select file
    dropZone.addEventListener('click', (e) => {
      if (e.target.id !== 'fontFile') {
        fontFileInput.click();
      }
    });

    // File input change
    fontFileInput.addEventListener('change', (e) => {
      if (e.target.files.length > 0) {
        const file = e.target.files[0];
        fileNameDisplay.textContent = `Selected: ${file.name}`;
        fileNameDisplay.classList.remove('hidden');
      }
    });

    // Drag and drop handlers
    dropZone.addEventListener('dragover', (e) => {
      e.preventDefault();
      dropZone.classList.add('border-teal', 'bg-white');
    });

    dropZone.addEventListener('dragleave', () => {
      dropZone.classList.remove('border-teal', 'bg-white');
    });

    dropZone.addEventListener('drop', (e) => {
      e.preventDefault();
      dropZone.classList.remove('border-teal', 'bg-white');
      
      const files = e.dataTransfer.files;
      if (files.length > 0) {
        fontFileInput.files = files;
        fileNameDisplay.textContent = `Selected: ${files[0].name}`;
        fileNameDisplay.classList.remove('hidden');
      }
    });

    // Handle upload form submission
    async function handleUpload(e) {
      e.preventDefault();
      
      const formData = new FormData(uploadForm);
      
      // Disable submit button
      submitBtn.disabled = true;
      submitBtn.textContent = 'Uploading...';
      submitBtn.classList.add('opacity-50', 'cursor-not-allowed');
      
      // Show status
      uploadStatus.classList.remove('hidden');
      uploadStatus.textContent = 'Uploading font...';
      uploadStatus.className = 'text-center font-bold text-text/60';
      
      try {
        const response = await fetch('php/upload_font.php', {
          method: 'POST',
          body: formData
        });
        
        const result = await response.json();
        
        if (result.success) {
          uploadStatus.textContent = result.message;
          uploadStatus.classList.add('text-teal');
          uploadForm.reset();
          fileNameDisplay.classList.add('hidden');
          
          // Reload page after 2 seconds to show new font
          setTimeout(() => {
            location.reload();
          }, 2000);
        } else {
          throw new Error(result.message || 'Upload failed');
        }
      } catch (error) {
        uploadStatus.textContent = `Error: ${error.message}`;
        uploadStatus.classList.add('text-red-600');
      } finally {
        // Re-enable submit button
        submitBtn.disabled = false;
        submitBtn.textContent = 'Submit for Review';
        submitBtn.classList.remove('opacity-50', 'cursor-not-allowed');
      }
    }

    // Render Chart
    document.addEventListener('DOMContentLoaded', function() {
      const ctx = document.getElementById('revenueChart').getContext('2d');
      new Chart(ctx, {
        type: 'line',
        data: {
          labels: ['W1', 'W2', 'W3', 'W4'],
          datasets: [{
            label: 'Revenue',
            data: [1200, 1900, 3000, 5000],
            borderColor: '#007F8C',
            backgroundColor: '#007F8C',
            tension: 0.4
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: { legend: { display: false } },
          scales: {
            x: { grid: { display: false, color: '#333' }, ticks: { color: '#fff' } },
            y: { grid: { color: '#333' }, ticks: { color: '#fff' } }
          }
        }
      });
    });
  </script>
</body>
</html>
